<?php

namespace LaraTui\State;

use Brick\JsonMapper\JsonMapper;
use Brick\JsonMapper\OnMissingProperties;
use LaraTui\Mapper\KebabCaseToCamelCaseMapper;

class PHPVersions
{
    /** @param PHPVersion[] $data */
    public function __construct(
        public readonly array $data,
    ) {
    }

    public static function fromResponseBody(string $data): self
    {
        return (new JsonMapper(
            onMissingProperties: OnMissingProperties::SET_NULL,
            jsonToPhpNameMapper: new KebabCaseToCamelCaseMapper(),
        ))
            ->map($data, self::class);
    }
}
